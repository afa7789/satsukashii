<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Mac Price Chart</title>
    <style>
        .chart-container {
            margin: 20px auto;
            width: 90%;
            max-width: 800px;
        }
        .legend {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 0 15px;
        }
        .legend-color {
            width: 15px;
            height: 15px;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <h2>Big Mac Price History: USD vs Satoshi</h2>
        
        <svg width="{{.SizeSVGW}}" height="{{.SizeSVGH}}" viewBox="0 0 {{.SizeSVGW}} {{.SizeSVGH}}" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect x="0" y="0" width="{{.SizeSVGW}}" height="{{.SizeSVGH}}" fill="#f8f9fa" />
            
            <!-- X and Y Axis -->
            <line x1="50" y1="{{subtract .SizeSVGH 50}}" x2="{{subtract .SizeSVGW 50}}" y2="{{subtract .SizeSVGH 50}}" stroke="#333" stroke-width="2" />
            <line x1="50" y1="50" x2="50" y2="{{subtract .SizeSVGH 50}}" stroke="#333" stroke-width="2" />
            
            <!-- Grid lines (optional) -->
            {{$height := subtract .SizeSVGH 100}}
            {{$width := subtract .SizeSVGW 100}}
            {{range $i := iterate 5}}
                {{$y := add 50 (multiply $i (divide $height 4))}}
                <line x1="50" y1="{{$y}}" x2="{{subtract $.SizeSVGW 50}}" y2="{{$y}}" stroke="#ddd" stroke-width="1" stroke-dasharray="5,5" />
            {{end}}
            
            <!-- USD Price Line Chart Path -->
            <polyline 
                fill="none" 
                stroke="#007bff" 
                stroke-width="2" 
                points="{{range $i, $x := .Y1Array}}{{if $i}} {{end}}{{$x}},{{index $.Y1Array $i}}{{end}}"
            />
            
            <!-- Satoshi Price Line Chart Path -->
            <polyline 
                fill="none" 
                stroke="#ff7700" 
                stroke-width="2" 
                points="{{range $i, $x := .Y1ArraySatoshi}}{{if $i}} {{end}}{{$x}},{{index $.Y1ArraySatoshi $i}}{{end}}"
            />
            
            <!-- Data Points for USD -->
            {{range $i, $x := .Y1Array}}
                <circle cx="{{$x}}" cy="{{index $.Y1Array $i}}" r="3" fill="#007bff" />
            {{end}}
            
            <!-- Data Points for Satoshi -->
            {{range $i, $x := .Y1ArraySatoshi}}
                <circle cx="{{$x}}" cy="{{index $.Y1ArraySatoshi $i}}" r="3" fill="#ff7700" />
            {{end}}
            
            <!-- X-Axis Labels (years) -->
            {{$dateRange := subtract .BiggestDate .LowestDate}}
            {{range $i := iterate 6}}
                {{$x := add 50 (multiply $i (divide $width 5))}}
                {{$timestamp := add $.LowestDate (multiply $i (divide $dateRange 5))}}
                <text x="{{$x}}" y="{{add (subtract $.SizeSVGH 50) 20}}" text-anchor="middle" font-size="12">{{formatDate $timestamp}}</text>
            {{end}}
            
            <!-- Y-Axis Labels for USD -->
            {{range $i := iterate 5}}
                {{$y := subtract (subtract $.SizeSVGH 50) (multiply $i (divide $height 4))}}
                {{$price := multiply $i (divide $.MaxPrice 4)}}
                <text x="45" y="{{$y}}" text-anchor="end" font-size="12" fill="#007bff">${{formatPrice $price}}</text>
            {{end}}
            
            <!-- Y-Axis Labels for Satoshi (right side) -->
            {{range $i := iterate 5}}
                {{$y := subtract (subtract $.SizeSVGH 50) (multiply $i (divide $height 4))}}
                {{$sats := multiply $i (divide $.MaxPriceSatoshi 4)}}
                <text x="{{add (subtract $.SizeSVGW 50) 5}}" y="{{$y}}" text-anchor="start" font-size="12" fill="#ff7700">{{formatSats $sats}} sats</text>
            {{end}}
        </svg>
        
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color" style="background-color: #007bff;"></div>
                <span>Big Mac Price (USD)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background-color: #ff7700;"></div>
                <span>Big Mac Price (Satoshi)</span>
            </div>
        </div>
    </div>
</body>
</html>